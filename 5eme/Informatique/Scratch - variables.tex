\documentclass[a4paper,12pt]{article}

\usepackage{préambule}

\definecolor{block1}{RGB}{230, 230, 230}
\definecolor{block2}{RGB}{180, 180, 180}

\newcommand{\racineDeDeux}{1.41421}

\newcommand{\blockHeight}{0.9}
\newcommand{\blockWidth}{9}
\newcommand{\clipPosition}{1.5}
\newcommand{\clipHeight}{0.15}
\newcommand{\arcStartRadius}{2}

\newcounter{codeBlockCounter}
\newcounter{codeBlockCounterBinary}
\setcounter{codeBlockCounter}{0}
\setcounter{codeBlockCounterBinary}{0}

\newcommand{\startInstruction}[1]{
	\coordinate (BlockStart) at (0,-\thecodeBlockCounter*\blockHeight);
	\ifthenelse{\equal{\thecodeBlockCounterBinary}{0}}{
		\addtocounter{codeBlockCounterBinary}{1}
		\draw[fill=block1] (BlockStart)
			arc (135:45:\arcStartRadius)
			-- ++(\blockWidth-\arcStartRadius*\racineDeDeux,0)
			-- ++(0,-\blockHeight)
			-- ++(-\blockWidth+\clipPosition+2.5*\clipHeight,0)
			-- ++(-\clipHeight,-\clipHeight)
			-- ++(-\clipHeight/2,0)
			-- ++(-\clipHeight,\clipHeight)
			-- ++(-\clipPosition,0)
			-- ++(0,\blockHeight);
	}{
		\addtocounter{codeBlockCounterBinary}{-1}
		\draw[fill=block2] (BlockStart)
			arc (135:45:\arcStartRadius)
			-- ++(\blockWidth-\arcStartRadius*\racineDeDeux,0)
			-- ++(0,-\blockHeight)
			-- ++(-\blockWidth+\clipPosition+2.5*\clipHeight,0)
			-- ++(-\clipHeight,-\clipHeight)
			-- ++(-\clipHeight/2,0)
			-- ++(-\clipHeight,\clipHeight)
			-- ++(-\clipPosition,0)
			-- ++(0,\blockHeight);
	}
	\node[anchor=west] at (0.5,-\thecodeBlockCounter*\blockHeight - \blockHeight/2) {#1};
	\addtocounter{codeBlockCounter}{1}
}

\newcommand{\instruction}[1]{
	\coordinate (BlockStart) at (0,-\thecodeBlockCounter*\blockHeight);
	\ifthenelse{\equal{\thecodeBlockCounterBinary}{0}}{
		\addtocounter{codeBlockCounterBinary}{1}
		\draw[fill=block1] (BlockStart)
			-- ++(\clipPosition,0)
			-- ++(\clipHeight,-\clipHeight)
			-- ++(\clipHeight/2,0)
			-- ++(\clipHeight,\clipHeight)
			-- ++(\blockWidth-\clipPosition-2.5*\clipHeight,0)
			-- ++(0,-\blockHeight)
			-- ++(-\blockWidth+\clipPosition+2.5*\clipHeight,0)
			-- ++(-\clipHeight,-\clipHeight)
			-- ++(-\clipHeight/2,0)
			-- ++(-\clipHeight,\clipHeight)
			-- ++(-\clipPosition,0)
			-- ++(0,\blockHeight);
	}{
		\addtocounter{codeBlockCounterBinary}{-1}
		\draw[fill=block2] (BlockStart)
			-- ++(\clipPosition,0)
			-- ++(\clipHeight,-\clipHeight)
			-- ++(\clipHeight/2,0)
			-- ++(\clipHeight,\clipHeight)
			-- ++(\blockWidth-\clipPosition-2.5*\clipHeight,0)
			-- ++(0,-\blockHeight)
			-- ++(-\blockWidth+\clipPosition+2.5*\clipHeight,0)
			-- ++(-\clipHeight,-\clipHeight)
			-- ++(-\clipHeight/2,0)
			-- ++(-\clipHeight,\clipHeight)
			-- ++(-\clipPosition,0)
			-- ++(0,\blockHeight);
	}
	\node[anchor=west] at (0.5,-\thecodeBlockCounter*\blockHeight - \blockHeight/2) {#1};
	\addtocounter{codeBlockCounter}{1}
}

\TitreDActivite{Scratch : variables}

\begin{document}

\maketitle

\section*{Compteur de temps}

On va reprendre un projet précédent, et rajouter un \uline{compteur de temps}.

\begin{itemize}
	\item Ouvre un des projets précédents, et sélectionne le personnage du joueur.
	\item Va dans la catégorie \textit{variables}, et crée un nouvelle variable, que tu nommeras “temps”.
	\item Utilise les instructions suivantes :

	      \begin{center}
		      \begin{tikzpicture}
			      \startInstruction{Quand \faFlag\  est cliqué}
			      \instruction{Mettre \squared{temps ▿} à \circled{0}}
			      \instruction{Dis \squared{temps} pendant \circled{2} secondes}
			      \instruction{Mettre \squared{temps ▿} à \circled{1}}
			      \instruction{Dis \squared{temps} pendant \circled{2} secondes}
		      \end{tikzpicture}
	      \end{center}

	      \warningbox{
		      N'écris pas “temps” dans les blocks : à la place, utilise le block rond dont le nom est “temps”.
	      }

	      Qu'observes-tu ? \dotfill
	\item Utilise la variable “temps” pour créer un compteur de temps : lorsque le jeu se termine, affiche ce compteur.
\end{itemize}

\section*{Devine le nombre}

Utilise les variable pour faire un jeu \textbf{devine le nombre}.

\uline{Règles} :
\begin{enumerate}
	\item L'ordinateur choisit un nombre entre 1 et 100. (Va voir dans la catégorie \textit{Opérateurs}).
	\item Il demande un nombre au joueur (catégorie \textit{Capteurs}) :
	      \begin{itemize}
		      \item Si le joueur donne le bon nombre, c'est gagné.
		      \item Si le nombre est trop petit, l'ordinateur dit “Trop petit !”.
		      \item Si le nombre est trop grand, l'ordinateur dit “Trop grand !”.
	      \end{itemize}
	\item L'ordinateur recommence la deuxième étape jusqu'à ce que le joueur trouve le nombre choisi.
\end{enumerate}

\end{document}